{% extends "website/base.html" %}

{% load mptt_tags %}
{% load humanize %}

{% block page %}

	{% include "surprise/includes/surprise-detail.html" %}


	<section class="comment-list">
	<h2>{{ surprise.comments.count }} comment{{ surprise.comments.count|pluralize }}</h2>

	<a class="new-comment" href="#" data-feature="posting comments"><i class="material-icons">add</i> <span>Add comment</span></a>

	{% recursetree surprise.comments.all %}
		<article class="comment">
			<div class="comment__meta">
{#				<span class="comment__points">no points</span>#}
				<span class="comment__posted">posted {{ node.created|naturaltime }}</span>
				<span class="comment__author">by <a href="#" data-feature="author profile">{{ node.author.username }}</a></span>
			</div>
			<div class="comment__content">
				{{ node.content }}
			</div>
			<div class="comment__actions">
				<a href="#" data-feature="replying to comments"><i class="material-icons">reply</i>
					<span>reply</span></a>
				<a href="#" data-feature="comments"><i class="material-icons">link</i> <span>permalink</span></a>
				<a href="#" data-feature="flagging comments"><i class="material-icons">flag</i><span>flag</span></a>
			</div>

			<section class="comment__replies">
				{{ children }}
			</section>
		</article>

	{% endrecursetree %}

{% endblock page %}
